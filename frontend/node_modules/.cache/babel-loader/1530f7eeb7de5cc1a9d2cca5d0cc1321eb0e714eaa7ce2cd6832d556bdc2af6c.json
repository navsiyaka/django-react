{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _react = require('react');\nvar _react2 = _interopRequireDefault(_react);\nvar _propTypes = require('prop-types');\nvar _propTypes2 = _interopRequireDefault(_propTypes);\nvar _createReactClass = require('create-react-class');\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\nvar _momentRange = require('./moment-range');\nvar _momentRange2 = _interopRequireDefault(_momentRange);\nvar _immutable = require('immutable');\nvar _immutable2 = _interopRequireDefault(_immutable);\nvar _calendar = require('calendar');\nvar _calendar2 = _interopRequireDefault(_calendar);\nvar _BemMixin = require('./utils/BemMixin');\nvar _BemMixin2 = _interopRequireDefault(_BemMixin);\nvar _CustomPropTypes = require('./utils/CustomPropTypes');\nvar _CustomPropTypes2 = _interopRequireDefault(_CustomPropTypes);\nvar _Legend = require('./Legend');\nvar _Legend2 = _interopRequireDefault(_Legend);\nvar _CalendarMonth = require('./calendar/CalendarMonth');\nvar _CalendarMonth2 = _interopRequireDefault(_CalendarMonth);\nvar _CalendarDate = require('./calendar/CalendarDate');\nvar _CalendarDate2 = _interopRequireDefault(_CalendarDate);\nvar _PaginationArrow = require('./PaginationArrow');\nvar _PaginationArrow2 = _interopRequireDefault(_PaginationArrow);\nvar _isMomentRange = require('./utils/isMomentRange');\nvar _isMomentRange2 = _interopRequireDefault(_isMomentRange);\nvar _hasUpdatedValue = require('./utils/hasUpdatedValue');\nvar _hasUpdatedValue2 = _interopRequireDefault(_hasUpdatedValue);\nvar _getYearMonth = require('./utils/getYearMonth');\nvar _reactAddonsPureRenderMixin = require('react-addons-pure-render-mixin');\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nvar absoluteMinimum = (0, _momentRange2.default)(new Date(-8640000000000000 / 2)).startOf('day');\nvar absoluteMaximum = (0, _momentRange2.default)(new Date(8640000000000000 / 2)).startOf('day');\nfunction noop() {}\nvar DateRangePicker = (0, _createReactClass2.default)({\n  mixins: [_BemMixin2.default, _reactAddonsPureRenderMixin2.default],\n  displayName: \"DateRangePicker\",\n  propTypes: {\n    bemBlock: _propTypes2.default.string,\n    bemNamespace: _propTypes2.default.string,\n    className: _propTypes2.default.string,\n    dateStates: _propTypes2.default.array,\n    // an array of date ranges and their states\n    defaultState: _propTypes2.default.string,\n    disableNavigation: _propTypes2.default.bool,\n    firstOfWeek: _propTypes2.default.oneOf([0, 1, 2, 3, 4, 5, 6]),\n    helpMessage: _propTypes2.default.string,\n    initialDate: _propTypes2.default.instanceOf(Date),\n    initialFromValue: _propTypes2.default.bool,\n    initialMonth: _propTypes2.default.number,\n    // Overrides values derived from initialDate/initialRange\n    initialRange: _propTypes2.default.object,\n    initialYear: _propTypes2.default.number,\n    // Overrides values derived from initialDate/initialRange\n    locale: _propTypes2.default.string,\n    maximumDate: _propTypes2.default.instanceOf(Date),\n    minimumDate: _propTypes2.default.instanceOf(Date),\n    numberOfCalendars: _propTypes2.default.number,\n    onHighlightDate: _propTypes2.default.func,\n    // triggered when a date is highlighted (hovered)\n    onHighlightRange: _propTypes2.default.func,\n    // triggered when a range is highlighted (hovered)\n    onSelect: _propTypes2.default.func,\n    // triggered when a date or range is selectec\n    onSelectStart: _propTypes2.default.func,\n    // triggered when the first date in a range is selected\n    paginationArrowComponent: _propTypes2.default.func,\n    selectedLabel: _propTypes2.default.string,\n    selectionType: _propTypes2.default.oneOf(['single', 'range']),\n    singleDateRange: _propTypes2.default.bool,\n    showLegend: _propTypes2.default.bool,\n    stateDefinitions: _propTypes2.default.object,\n    value: _CustomPropTypes2.default.momentOrMomentRange\n  },\n  getDefaultProps: function getDefaultProps() {\n    var date = new Date();\n    var initialDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    return {\n      bemNamespace: null,\n      bemBlock: 'DateRangePicker',\n      className: '',\n      numberOfCalendars: 1,\n      firstOfWeek: 0,\n      disableNavigation: false,\n      nextLabel: '',\n      previousLabel: '',\n      initialDate: initialDate,\n      initialFromValue: true,\n      locale: (0, _momentRange2.default)().locale(),\n      selectionType: 'range',\n      singleDateRange: false,\n      stateDefinitions: {\n        '__default': {\n          color: null,\n          selectable: true,\n          label: null\n        }\n      },\n      selectedLabel: \"Your selected dates\",\n      defaultState: '__default',\n      dateStates: [],\n      showLegend: false,\n      onSelect: noop,\n      paginationArrowComponent: _PaginationArrow2.default\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var nextDateStates = this.getDateStates(nextProps);\n    var nextEnabledRange = this.getEnabledRange(nextProps);\n    var updatedState = {\n      selectedStartDate: null,\n      hideSelection: false,\n      dateStates: this.state.dateStates && _immutable2.default.is(this.state.dateStates, nextDateStates) ? this.state.dateStates : nextDateStates,\n      enabledRange: this.state.enabledRange && this.state.enabledRange.isSame(nextEnabledRange) ? this.state.enabledRange : nextEnabledRange\n    };\n    if ((0, _hasUpdatedValue2.default)(this.props, nextProps)) {\n      if (!nextProps.value || !this.isStartOrEndVisible(nextProps)) {\n        var yearMonth = (0, _getYearMonth.getYearMonthProps)(nextProps);\n        updatedState.year = yearMonth.year;\n        updatedState.month = yearMonth.month;\n      }\n    }\n    this.setState(updatedState);\n  },\n  getInitialState: function getInitialState() {\n    var now = new Date();\n    var _props = this.props,\n      initialYear = _props.initialYear,\n      initialMonth = _props.initialMonth,\n      initialFromValue = _props.initialFromValue,\n      value = _props.value;\n    var year = now.getFullYear();\n    var month = now.getMonth();\n    if (Number.isInteger(initialYear) && Number.isInteger(initialMonth)) {\n      year = initialYear;\n      month = initialMonth;\n    }\n    if (initialFromValue && (_momentRange2.default.isMoment(value) || (0, _isMomentRange2.default)(value))) {\n      var yearMonth = (0, _getYearMonth.getYearMonthProps)(this.props);\n      month = yearMonth.month;\n      year = yearMonth.year;\n    }\n    return {\n      year: year,\n      month: month,\n      selectedStartDate: null,\n      highlightedDate: null,\n      highlightRange: null,\n      hideSelection: false,\n      enabledRange: this.getEnabledRange(this.props),\n      dateStates: this.getDateStates(this.props)\n    };\n  },\n  getEnabledRange: function getEnabledRange(props) {\n    var min = props.minimumDate ? (0, _momentRange2.default)(props.minimumDate).startOf('day') : absoluteMinimum;\n    var max = props.maximumDate ? (0, _momentRange2.default)(props.maximumDate).startOf('day') : absoluteMaximum;\n    return _momentRange2.default.range(min, max);\n  },\n  getDateStates: function getDateStates(props) {\n    var dateStates = props.dateStates,\n      defaultState = props.defaultState,\n      stateDefinitions = props.stateDefinitions;\n    var actualStates = [];\n    var minDate = absoluteMinimum;\n    var maxDate = absoluteMaximum;\n    var dateCursor = (0, _momentRange2.default)(minDate).startOf('day');\n    var defs = _immutable2.default.fromJS(stateDefinitions);\n    dateStates.forEach(function (s) {\n      var r = s.range;\n      var start = r.start.startOf('day');\n      var end = r.end.startOf('day');\n      if (!dateCursor.isSame(start, 'day')) {\n        actualStates.push({\n          state: defaultState,\n          range: _momentRange2.default.range(dateCursor, start)\n        });\n      }\n      actualStates.push(s);\n      dateCursor = end;\n    });\n    actualStates.push({\n      state: defaultState,\n      range: _momentRange2.default.range(dateCursor, maxDate)\n    });\n\n    // sanitize date states\n    return _immutable2.default.List(actualStates).map(function (s) {\n      var def = defs.get(s.state);\n      return _immutable2.default.Map({\n        range: s.range,\n        state: s.state,\n        selectable: def.get('selectable', true),\n        color: def.get('color')\n      });\n    });\n  },\n  isDateDisabled: function isDateDisabled(date) {\n    return !this.state.enabledRange.contains(date);\n  },\n  isDateSelectable: function isDateSelectable(date) {\n    return this.dateRangesForDate(date).some(function (r) {\n      return r.get('selectable');\n    });\n  },\n  nonSelectableStateRanges: function nonSelectableStateRanges() {\n    return this.state.dateStates.filter(function (d) {\n      return !d.get('selectable');\n    });\n  },\n  dateRangesForDate: function dateRangesForDate(date) {\n    return this.state.dateStates.filter(function (d) {\n      return d.get('range').contains(date);\n    });\n  },\n  sanitizeRange: function sanitizeRange(range, forwards) {\n    /* Truncates the provided range at the first intersection\n     * with a non-selectable state. Using forwards to determine\n     * which direction to work\n     */\n    var blockedRanges = this.nonSelectableStateRanges().map(function (r) {\n      return r.get('range');\n    });\n    var intersect = void 0;\n    if (forwards) {\n      intersect = blockedRanges.find(function (r) {\n        return range.intersect(r);\n      });\n      if (intersect) {\n        return _momentRange2.default.range(range.start, intersect.start);\n      }\n    } else {\n      intersect = blockedRanges.findLast(function (r) {\n        return range.intersect(r);\n      });\n      if (intersect) {\n        return _momentRange2.default.range(intersect.end, range.end);\n      }\n    }\n    if (range.start.isBefore(this.state.enabledRange.start)) {\n      return _momentRange2.default.range(this.state.enabledRange.start, range.end);\n    }\n    if (range.end.isAfter(this.state.enabledRange.end)) {\n      return _momentRange2.default.range(range.start, this.state.enabledRange.end);\n    }\n    return range;\n  },\n  highlightRange: function highlightRange(range) {\n    this.setState({\n      highlightedRange: range,\n      highlightedDate: null\n    });\n    if (typeof this.props.onHighlightRange === 'function') {\n      this.props.onHighlightRange(range, this.statesForRange(range));\n    }\n  },\n  onUnHighlightDate: function onUnHighlightDate() {\n    this.setState({\n      highlightedDate: null\n    });\n  },\n  onSelectDate: function onSelectDate(date) {\n    var selectionType = this.props.selectionType;\n    var selectedStartDate = this.state.selectedStartDate;\n    if (selectionType === 'range') {\n      if (selectedStartDate) {\n        this.completeRangeSelection();\n      } else if (date && !this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.startRangeSelection(date);\n        if (this.props.singleDateRange) {\n          this.highlightRange(_momentRange2.default.range(date, date));\n        }\n      }\n    } else {\n      if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.completeSelection();\n      }\n    }\n  },\n  onHighlightDate: function onHighlightDate(date) {\n    var selectionType = this.props.selectionType;\n    var selectedStartDate = this.state.selectedStartDate;\n    var datePair = void 0;\n    var range = void 0;\n    var forwards = void 0;\n    if (selectionType === 'range') {\n      if (selectedStartDate) {\n        datePair = _immutable2.default.List.of(selectedStartDate, date).sortBy(function (d) {\n          return d.unix();\n        });\n        range = _momentRange2.default.range(datePair.get(0), datePair.get(1));\n        forwards = range.start.unix() === selectedStartDate.unix();\n        range = this.sanitizeRange(range, forwards);\n        this.highlightRange(range);\n      } else if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.highlightDate(date);\n      }\n    } else {\n      if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.highlightDate(date);\n      }\n    }\n  },\n  startRangeSelection: function startRangeSelection(date) {\n    this.setState({\n      hideSelection: true,\n      selectedStartDate: date\n    });\n    if (typeof this.props.onSelectStart === 'function') {\n      this.props.onSelectStart((0, _momentRange2.default)(date));\n    }\n  },\n  statesForDate: function statesForDate(date) {\n    return this.state.dateStates.filter(function (d) {\n      return date.within(d.get('range'));\n    }).map(function (d) {\n      return d.get('state');\n    });\n  },\n  statesForRange: function statesForRange(range) {\n    if (range.start.isSame(range.end, 'day')) {\n      return this.statesForDate(range.start);\n    }\n    return this.state.dateStates.filter(function (d) {\n      return d.get('range').intersect(range);\n    }).map(function (d) {\n      return d.get('state');\n    });\n  },\n  completeSelection: function completeSelection() {\n    var highlightedDate = this.state.highlightedDate;\n    if (highlightedDate) {\n      this.setState({\n        hideSelection: false,\n        highlightedDate: null\n      });\n      this.props.onSelect(highlightedDate, this.statesForDate(highlightedDate));\n    }\n  },\n  completeRangeSelection: function completeRangeSelection() {\n    var range = this.state.highlightedRange;\n    if (range && (!range.start.isSame(range.end, 'day') || this.props.singleDateRange)) {\n      this.setState({\n        selectedStartDate: null,\n        highlightedRange: null,\n        highlightedDate: null,\n        hideSelection: false\n      });\n      this.props.onSelect(range, this.statesForRange(range));\n    }\n  },\n  highlightDate: function highlightDate(date) {\n    this.setState({\n      highlightedDate: date\n    });\n    if (typeof this.props.onHighlightDate === 'function') {\n      this.props.onHighlightDate(date, this.statesForDate(date));\n    }\n  },\n  getMonthDate: function getMonthDate() {\n    return (0, _momentRange2.default)(new Date(this.state.year, this.state.month, 1));\n  },\n  isStartOrEndVisible: function isStartOrEndVisible(props) {\n    var _this = this;\n    var value = props.value,\n      selectionType = props.selectionType,\n      numberOfCalendars = props.numberOfCalendars;\n    var isVisible = function isVisible(date) {\n      var yearMonth = (0, _getYearMonth.getYearMonth)(date);\n      var isSameYear = yearMonth.year === _this.state.year;\n      var isMonthVisible = yearMonth.month === _this.state.month || numberOfCalendars === 2 && yearMonth.month - 1 === _this.state.month;\n      return isSameYear && isMonthVisible;\n    };\n    if (selectionType === 'single') {\n      return isVisible(value);\n    }\n    return isVisible(value.start) || isVisible(value.end);\n  },\n  canMoveBack: function canMoveBack() {\n    if (this.getMonthDate().subtract(1, 'days').isBefore(this.state.enabledRange.start)) {\n      return false;\n    }\n    return true;\n  },\n  moveBack: function moveBack() {\n    var monthDate = void 0;\n    if (this.canMoveBack()) {\n      monthDate = this.getMonthDate();\n      monthDate.subtract(1, 'months');\n      this.setState((0, _getYearMonth.getYearMonth)(monthDate));\n    }\n  },\n  canMoveForward: function canMoveForward() {\n    if (this.getMonthDate().add(this.props.numberOfCalendars, 'months').isAfter(this.state.enabledRange.end)) {\n      return false;\n    }\n    return true;\n  },\n  moveForward: function moveForward() {\n    var monthDate = void 0;\n    if (this.canMoveForward()) {\n      monthDate = this.getMonthDate();\n      monthDate.add(1, 'months');\n      this.setState((0, _getYearMonth.getYearMonth)(monthDate));\n    }\n  },\n  changeYear: function changeYear(year) {\n    var _state = this.state,\n      enabledRange = _state.enabledRange,\n      month = _state.month;\n    if ((0, _momentRange2.default)({\n      years: year,\n      months: month,\n      date: 1\n    }).unix() < enabledRange.start.unix()) {\n      month = enabledRange.start.month();\n    }\n    if ((0, _momentRange2.default)({\n      years: year,\n      months: month + 1,\n      date: 1\n    }).unix() > enabledRange.end.unix()) {\n      month = enabledRange.end.month();\n    }\n    this.setState({\n      year: year,\n      month: month\n    });\n  },\n  changeMonth: function changeMonth(date) {\n    this.setState({\n      month: date\n    });\n  },\n  rangesOverlap: function rangesOverlap(rangeA, rangeB) {\n    if (rangeA.overlaps(rangeB) || rangeA.contains(rangeB.start) || rangeA.contains(rangeB.end)) {\n      return true;\n    }\n    return false;\n  },\n  renderCalendar: function renderCalendar(index) {\n    var _props2 = this.props,\n      bemBlock = _props2.bemBlock,\n      bemNamespace = _props2.bemNamespace,\n      firstOfWeek = _props2.firstOfWeek,\n      numberOfCalendars = _props2.numberOfCalendars,\n      selectionType = _props2.selectionType,\n      value = _props2.value;\n    var _state2 = this.state,\n      dateStates = _state2.dateStates,\n      enabledRange = _state2.enabledRange,\n      hideSelection = _state2.hideSelection,\n      highlightedDate = _state2.highlightedDate,\n      highlightedRange = _state2.highlightedRange;\n    var monthDate = this.getMonthDate();\n    var year = monthDate.year();\n    var month = monthDate.month();\n    var key = index + '-' + year + '-' + month;\n    var props = void 0;\n    monthDate.add(index, 'months');\n    var cal = new _calendar2.default.Calendar(firstOfWeek);\n    var monthDates = _immutable2.default.fromJS(cal.monthDates(monthDate.year(), monthDate.month()));\n    var monthStart = monthDates.first().first();\n    var monthEnd = monthDates.last().last();\n    var monthRange = _momentRange2.default.range(monthStart, monthEnd);\n    if (_momentRange2.default.isMoment(value) && !monthRange.contains(value)) {\n      value = null;\n    } else if ((0, _isMomentRange2.default)(value) && !this.rangesOverlap(monthRange, value)) {\n      value = null;\n    }\n    if (!_momentRange2.default.isMoment(highlightedDate) || !monthRange.contains(highlightedDate)) {\n      highlightedDate = null;\n    }\n    if (!(0, _isMomentRange2.default)(highlightedRange) || !this.rangesOverlap(monthRange, highlightedRange)) {\n      highlightedRange = null;\n    }\n    props = {\n      bemBlock: bemBlock,\n      bemNamespace: bemNamespace,\n      dateStates: dateStates,\n      enabledRange: enabledRange,\n      firstOfWeek: firstOfWeek,\n      hideSelection: hideSelection,\n      highlightedDate: highlightedDate,\n      highlightedRange: highlightedRange,\n      index: index,\n      key: key,\n      selectionType: selectionType,\n      value: value,\n      maxIndex: numberOfCalendars - 1,\n      firstOfMonth: monthDate,\n      onMonthChange: this.changeMonth,\n      onYearChange: this.changeYear,\n      onSelectDate: this.onSelectDate,\n      onHighlightDate: this.onHighlightDate,\n      onUnHighlightDate: this.onUnHighlightDate,\n      dateRangesForDate: this.dateRangesForDate,\n      dateComponent: _CalendarDate2.default,\n      locale: this.props.locale\n    };\n    return _react2.default.createElement(_CalendarMonth2.default, props);\n  },\n  render: function render() {\n    var _props3 = this.props,\n      PaginationArrowComponent = _props3.paginationArrowComponent,\n      className = _props3.className,\n      numberOfCalendars = _props3.numberOfCalendars,\n      stateDefinitions = _props3.stateDefinitions,\n      selectedLabel = _props3.selectedLabel,\n      showLegend = _props3.showLegend,\n      helpMessage = _props3.helpMessage;\n    var calendars = _immutable2.default.Range(0, numberOfCalendars).map(this.renderCalendar);\n    className = this.cx({\n      element: null\n    }) + ' ' + className;\n    return _react2.default.createElement('div', {\n      className: className.trim()\n    }, _react2.default.createElement(PaginationArrowComponent, {\n      direction: 'previous',\n      onTrigger: this.moveBack,\n      disabled: !this.canMoveBack()\n    }), calendars.toJS(), _react2.default.createElement(PaginationArrowComponent, {\n      direction: 'next',\n      onTrigger: this.moveForward,\n      disabled: !this.canMoveForward()\n    }), helpMessage ? _react2.default.createElement('span', {\n      className: this.cx({\n        element: 'HelpMessage'\n      })\n    }, helpMessage) : null, showLegend ? _react2.default.createElement(_Legend2.default, {\n      stateDefinitions: stateDefinitions,\n      selectedLabel: selectedLabel\n    }) : null);\n  }\n});\nexports.default = DateRangePicker;","map":{"version":3,"names":["Object","defineProperty","exports","value","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_createReactClass","_createReactClass2","_momentRange","_momentRange2","_immutable","_immutable2","_calendar","_calendar2","_BemMixin","_BemMixin2","_CustomPropTypes","_CustomPropTypes2","_Legend","_Legend2","_CalendarMonth","_CalendarMonth2","_CalendarDate","_CalendarDate2","_PaginationArrow","_PaginationArrow2","_isMomentRange","_isMomentRange2","_hasUpdatedValue","_hasUpdatedValue2","_getYearMonth","_reactAddonsPureRenderMixin","_reactAddonsPureRenderMixin2","obj","__esModule","default","absoluteMinimum","Date","startOf","absoluteMaximum","noop","DateRangePicker","mixins","displayName","propTypes","bemBlock","string","bemNamespace","className","dateStates","array","defaultState","disableNavigation","bool","firstOfWeek","oneOf","helpMessage","initialDate","instanceOf","initialFromValue","initialMonth","number","initialRange","object","initialYear","locale","maximumDate","minimumDate","numberOfCalendars","onHighlightDate","func","onHighlightRange","onSelect","onSelectStart","paginationArrowComponent","selectedLabel","selectionType","singleDateRange","showLegend","stateDefinitions","momentOrMomentRange","getDefaultProps","date","getFullYear","getMonth","getDate","nextLabel","previousLabel","color","selectable","label","componentWillReceiveProps","nextProps","nextDateStates","getDateStates","nextEnabledRange","getEnabledRange","updatedState","selectedStartDate","hideSelection","state","is","enabledRange","isSame","props","isStartOrEndVisible","yearMonth","getYearMonthProps","year","month","setState","getInitialState","now","_props","Number","isInteger","isMoment","highlightedDate","highlightRange","min","max","range","actualStates","minDate","maxDate","dateCursor","defs","fromJS","forEach","s","r","start","end","push","List","map","def","get","Map","isDateDisabled","contains","isDateSelectable","dateRangesForDate","some","nonSelectableStateRanges","filter","d","sanitizeRange","forwards","blockedRanges","intersect","find","findLast","isBefore","isAfter","highlightedRange","statesForRange","onUnHighlightDate","onSelectDate","completeRangeSelection","startRangeSelection","completeSelection","datePair","of","sortBy","unix","highlightDate","statesForDate","within","getMonthDate","_this","isVisible","getYearMonth","isSameYear","isMonthVisible","canMoveBack","subtract","moveBack","monthDate","canMoveForward","add","moveForward","changeYear","_state","years","months","changeMonth","rangesOverlap","rangeA","rangeB","overlaps","renderCalendar","index","_props2","_state2","key","cal","Calendar","monthDates","monthStart","first","monthEnd","last","monthRange","maxIndex","firstOfMonth","onMonthChange","onYearChange","dateComponent","createElement","render","_props3","PaginationArrowComponent","calendars","Range","cx","element","trim","direction","onTrigger","disabled","toJS"],"sources":["/app/frontend/node_modules/react-daterange-picker/dist/DateRangePicker.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _createReactClass = require('create-react-class');\n\nvar _createReactClass2 = _interopRequireDefault(_createReactClass);\n\nvar _momentRange = require('./moment-range');\n\nvar _momentRange2 = _interopRequireDefault(_momentRange);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _calendar = require('calendar');\n\nvar _calendar2 = _interopRequireDefault(_calendar);\n\nvar _BemMixin = require('./utils/BemMixin');\n\nvar _BemMixin2 = _interopRequireDefault(_BemMixin);\n\nvar _CustomPropTypes = require('./utils/CustomPropTypes');\n\nvar _CustomPropTypes2 = _interopRequireDefault(_CustomPropTypes);\n\nvar _Legend = require('./Legend');\n\nvar _Legend2 = _interopRequireDefault(_Legend);\n\nvar _CalendarMonth = require('./calendar/CalendarMonth');\n\nvar _CalendarMonth2 = _interopRequireDefault(_CalendarMonth);\n\nvar _CalendarDate = require('./calendar/CalendarDate');\n\nvar _CalendarDate2 = _interopRequireDefault(_CalendarDate);\n\nvar _PaginationArrow = require('./PaginationArrow');\n\nvar _PaginationArrow2 = _interopRequireDefault(_PaginationArrow);\n\nvar _isMomentRange = require('./utils/isMomentRange');\n\nvar _isMomentRange2 = _interopRequireDefault(_isMomentRange);\n\nvar _hasUpdatedValue = require('./utils/hasUpdatedValue');\n\nvar _hasUpdatedValue2 = _interopRequireDefault(_hasUpdatedValue);\n\nvar _getYearMonth = require('./utils/getYearMonth');\n\nvar _reactAddonsPureRenderMixin = require('react-addons-pure-render-mixin');\n\nvar _reactAddonsPureRenderMixin2 = _interopRequireDefault(_reactAddonsPureRenderMixin);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar absoluteMinimum = (0, _momentRange2.default)(new Date(-8640000000000000 / 2)).startOf('day');\nvar absoluteMaximum = (0, _momentRange2.default)(new Date(8640000000000000 / 2)).startOf('day');\n\nfunction noop() {}\n\nvar DateRangePicker = (0, _createReactClass2.default)({\n  mixins: [_BemMixin2.default, _reactAddonsPureRenderMixin2.default],\n  displayName: \"DateRangePicker\",\n\n  propTypes: {\n    bemBlock: _propTypes2.default.string,\n    bemNamespace: _propTypes2.default.string,\n    className: _propTypes2.default.string,\n    dateStates: _propTypes2.default.array, // an array of date ranges and their states\n    defaultState: _propTypes2.default.string,\n    disableNavigation: _propTypes2.default.bool,\n    firstOfWeek: _propTypes2.default.oneOf([0, 1, 2, 3, 4, 5, 6]),\n    helpMessage: _propTypes2.default.string,\n    initialDate: _propTypes2.default.instanceOf(Date),\n    initialFromValue: _propTypes2.default.bool,\n    initialMonth: _propTypes2.default.number, // Overrides values derived from initialDate/initialRange\n    initialRange: _propTypes2.default.object,\n    initialYear: _propTypes2.default.number, // Overrides values derived from initialDate/initialRange\n    locale: _propTypes2.default.string,\n    maximumDate: _propTypes2.default.instanceOf(Date),\n    minimumDate: _propTypes2.default.instanceOf(Date),\n    numberOfCalendars: _propTypes2.default.number,\n    onHighlightDate: _propTypes2.default.func, // triggered when a date is highlighted (hovered)\n    onHighlightRange: _propTypes2.default.func, // triggered when a range is highlighted (hovered)\n    onSelect: _propTypes2.default.func, // triggered when a date or range is selectec\n    onSelectStart: _propTypes2.default.func, // triggered when the first date in a range is selected\n    paginationArrowComponent: _propTypes2.default.func,\n    selectedLabel: _propTypes2.default.string,\n    selectionType: _propTypes2.default.oneOf(['single', 'range']),\n    singleDateRange: _propTypes2.default.bool,\n    showLegend: _propTypes2.default.bool,\n    stateDefinitions: _propTypes2.default.object,\n    value: _CustomPropTypes2.default.momentOrMomentRange\n  },\n\n  getDefaultProps: function getDefaultProps() {\n    var date = new Date();\n    var initialDate = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n\n    return {\n      bemNamespace: null,\n      bemBlock: 'DateRangePicker',\n      className: '',\n      numberOfCalendars: 1,\n      firstOfWeek: 0,\n      disableNavigation: false,\n      nextLabel: '',\n      previousLabel: '',\n      initialDate: initialDate,\n      initialFromValue: true,\n      locale: (0, _momentRange2.default)().locale(),\n      selectionType: 'range',\n      singleDateRange: false,\n      stateDefinitions: {\n        '__default': {\n          color: null,\n          selectable: true,\n          label: null\n        }\n      },\n      selectedLabel: \"Your selected dates\",\n      defaultState: '__default',\n      dateStates: [],\n      showLegend: false,\n      onSelect: noop,\n      paginationArrowComponent: _PaginationArrow2.default\n    };\n  },\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\n    var nextDateStates = this.getDateStates(nextProps);\n    var nextEnabledRange = this.getEnabledRange(nextProps);\n\n    var updatedState = {\n      selectedStartDate: null,\n      hideSelection: false,\n      dateStates: this.state.dateStates && _immutable2.default.is(this.state.dateStates, nextDateStates) ? this.state.dateStates : nextDateStates,\n      enabledRange: this.state.enabledRange && this.state.enabledRange.isSame(nextEnabledRange) ? this.state.enabledRange : nextEnabledRange\n    };\n\n    if ((0, _hasUpdatedValue2.default)(this.props, nextProps)) {\n      if (!nextProps.value || !this.isStartOrEndVisible(nextProps)) {\n        var yearMonth = (0, _getYearMonth.getYearMonthProps)(nextProps);\n\n        updatedState.year = yearMonth.year;\n        updatedState.month = yearMonth.month;\n      }\n    }\n\n    this.setState(updatedState);\n  },\n  getInitialState: function getInitialState() {\n    var now = new Date();\n    var _props = this.props,\n        initialYear = _props.initialYear,\n        initialMonth = _props.initialMonth,\n        initialFromValue = _props.initialFromValue,\n        value = _props.value;\n\n    var year = now.getFullYear();\n    var month = now.getMonth();\n\n    if (Number.isInteger(initialYear) && Number.isInteger(initialMonth)) {\n      year = initialYear;\n      month = initialMonth;\n    }\n\n    if (initialFromValue && (_momentRange2.default.isMoment(value) || (0, _isMomentRange2.default)(value))) {\n      var yearMonth = (0, _getYearMonth.getYearMonthProps)(this.props);\n      month = yearMonth.month;\n      year = yearMonth.year;\n    }\n\n    return {\n      year: year,\n      month: month,\n      selectedStartDate: null,\n      highlightedDate: null,\n      highlightRange: null,\n      hideSelection: false,\n      enabledRange: this.getEnabledRange(this.props),\n      dateStates: this.getDateStates(this.props)\n    };\n  },\n  getEnabledRange: function getEnabledRange(props) {\n    var min = props.minimumDate ? (0, _momentRange2.default)(props.minimumDate).startOf('day') : absoluteMinimum;\n    var max = props.maximumDate ? (0, _momentRange2.default)(props.maximumDate).startOf('day') : absoluteMaximum;\n\n    return _momentRange2.default.range(min, max);\n  },\n  getDateStates: function getDateStates(props) {\n    var dateStates = props.dateStates,\n        defaultState = props.defaultState,\n        stateDefinitions = props.stateDefinitions;\n\n    var actualStates = [];\n    var minDate = absoluteMinimum;\n    var maxDate = absoluteMaximum;\n    var dateCursor = (0, _momentRange2.default)(minDate).startOf('day');\n\n    var defs = _immutable2.default.fromJS(stateDefinitions);\n\n    dateStates.forEach(function (s) {\n      var r = s.range;\n      var start = r.start.startOf('day');\n      var end = r.end.startOf('day');\n\n      if (!dateCursor.isSame(start, 'day')) {\n        actualStates.push({\n          state: defaultState,\n          range: _momentRange2.default.range(dateCursor, start)\n        });\n      }\n      actualStates.push(s);\n      dateCursor = end;\n    });\n\n    actualStates.push({\n      state: defaultState,\n      range: _momentRange2.default.range(dateCursor, maxDate)\n    });\n\n    // sanitize date states\n    return _immutable2.default.List(actualStates).map(function (s) {\n      var def = defs.get(s.state);\n      return _immutable2.default.Map({\n        range: s.range,\n        state: s.state,\n        selectable: def.get('selectable', true),\n        color: def.get('color')\n      });\n    });\n  },\n  isDateDisabled: function isDateDisabled(date) {\n    return !this.state.enabledRange.contains(date);\n  },\n  isDateSelectable: function isDateSelectable(date) {\n    return this.dateRangesForDate(date).some(function (r) {\n      return r.get('selectable');\n    });\n  },\n  nonSelectableStateRanges: function nonSelectableStateRanges() {\n    return this.state.dateStates.filter(function (d) {\n      return !d.get('selectable');\n    });\n  },\n  dateRangesForDate: function dateRangesForDate(date) {\n    return this.state.dateStates.filter(function (d) {\n      return d.get('range').contains(date);\n    });\n  },\n  sanitizeRange: function sanitizeRange(range, forwards) {\n    /* Truncates the provided range at the first intersection\n     * with a non-selectable state. Using forwards to determine\n     * which direction to work\n     */\n    var blockedRanges = this.nonSelectableStateRanges().map(function (r) {\n      return r.get('range');\n    });\n    var intersect = void 0;\n\n    if (forwards) {\n      intersect = blockedRanges.find(function (r) {\n        return range.intersect(r);\n      });\n      if (intersect) {\n        return _momentRange2.default.range(range.start, intersect.start);\n      }\n    } else {\n      intersect = blockedRanges.findLast(function (r) {\n        return range.intersect(r);\n      });\n\n      if (intersect) {\n        return _momentRange2.default.range(intersect.end, range.end);\n      }\n    }\n\n    if (range.start.isBefore(this.state.enabledRange.start)) {\n      return _momentRange2.default.range(this.state.enabledRange.start, range.end);\n    }\n\n    if (range.end.isAfter(this.state.enabledRange.end)) {\n      return _momentRange2.default.range(range.start, this.state.enabledRange.end);\n    }\n\n    return range;\n  },\n  highlightRange: function highlightRange(range) {\n    this.setState({\n      highlightedRange: range,\n      highlightedDate: null\n    });\n    if (typeof this.props.onHighlightRange === 'function') {\n      this.props.onHighlightRange(range, this.statesForRange(range));\n    }\n  },\n  onUnHighlightDate: function onUnHighlightDate() {\n    this.setState({\n      highlightedDate: null\n    });\n  },\n  onSelectDate: function onSelectDate(date) {\n    var selectionType = this.props.selectionType;\n    var selectedStartDate = this.state.selectedStartDate;\n\n\n    if (selectionType === 'range') {\n      if (selectedStartDate) {\n        this.completeRangeSelection();\n      } else if (date && !this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.startRangeSelection(date);\n        if (this.props.singleDateRange) {\n          this.highlightRange(_momentRange2.default.range(date, date));\n        }\n      }\n    } else {\n      if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.completeSelection();\n      }\n    }\n  },\n  onHighlightDate: function onHighlightDate(date) {\n    var selectionType = this.props.selectionType;\n    var selectedStartDate = this.state.selectedStartDate;\n\n\n    var datePair = void 0;\n    var range = void 0;\n    var forwards = void 0;\n\n    if (selectionType === 'range') {\n      if (selectedStartDate) {\n        datePair = _immutable2.default.List.of(selectedStartDate, date).sortBy(function (d) {\n          return d.unix();\n        });\n        range = _momentRange2.default.range(datePair.get(0), datePair.get(1));\n        forwards = range.start.unix() === selectedStartDate.unix();\n        range = this.sanitizeRange(range, forwards);\n        this.highlightRange(range);\n      } else if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.highlightDate(date);\n      }\n    } else {\n      if (!this.isDateDisabled(date) && this.isDateSelectable(date)) {\n        this.highlightDate(date);\n      }\n    }\n  },\n  startRangeSelection: function startRangeSelection(date) {\n    this.setState({\n      hideSelection: true,\n      selectedStartDate: date\n    });\n    if (typeof this.props.onSelectStart === 'function') {\n      this.props.onSelectStart((0, _momentRange2.default)(date));\n    }\n  },\n  statesForDate: function statesForDate(date) {\n    return this.state.dateStates.filter(function (d) {\n      return date.within(d.get('range'));\n    }).map(function (d) {\n      return d.get('state');\n    });\n  },\n  statesForRange: function statesForRange(range) {\n    if (range.start.isSame(range.end, 'day')) {\n      return this.statesForDate(range.start);\n    }\n    return this.state.dateStates.filter(function (d) {\n      return d.get('range').intersect(range);\n    }).map(function (d) {\n      return d.get('state');\n    });\n  },\n  completeSelection: function completeSelection() {\n    var highlightedDate = this.state.highlightedDate;\n    if (highlightedDate) {\n      this.setState({\n        hideSelection: false,\n        highlightedDate: null\n      });\n      this.props.onSelect(highlightedDate, this.statesForDate(highlightedDate));\n    }\n  },\n  completeRangeSelection: function completeRangeSelection() {\n    var range = this.state.highlightedRange;\n\n    if (range && (!range.start.isSame(range.end, 'day') || this.props.singleDateRange)) {\n      this.setState({\n        selectedStartDate: null,\n        highlightedRange: null,\n        highlightedDate: null,\n        hideSelection: false\n      });\n      this.props.onSelect(range, this.statesForRange(range));\n    }\n  },\n  highlightDate: function highlightDate(date) {\n    this.setState({\n      highlightedDate: date\n    });\n    if (typeof this.props.onHighlightDate === 'function') {\n      this.props.onHighlightDate(date, this.statesForDate(date));\n    }\n  },\n  getMonthDate: function getMonthDate() {\n    return (0, _momentRange2.default)(new Date(this.state.year, this.state.month, 1));\n  },\n  isStartOrEndVisible: function isStartOrEndVisible(props) {\n    var _this = this;\n\n    var value = props.value,\n        selectionType = props.selectionType,\n        numberOfCalendars = props.numberOfCalendars;\n\n\n    var isVisible = function isVisible(date) {\n      var yearMonth = (0, _getYearMonth.getYearMonth)(date);\n      var isSameYear = yearMonth.year === _this.state.year;\n      var isMonthVisible = yearMonth.month === _this.state.month || numberOfCalendars === 2 && yearMonth.month - 1 === _this.state.month;\n\n      return isSameYear && isMonthVisible;\n    };\n\n    if (selectionType === 'single') {\n      return isVisible(value);\n    }\n\n    return isVisible(value.start) || isVisible(value.end);\n  },\n  canMoveBack: function canMoveBack() {\n    if (this.getMonthDate().subtract(1, 'days').isBefore(this.state.enabledRange.start)) {\n      return false;\n    }\n    return true;\n  },\n  moveBack: function moveBack() {\n    var monthDate = void 0;\n\n    if (this.canMoveBack()) {\n      monthDate = this.getMonthDate();\n      monthDate.subtract(1, 'months');\n      this.setState((0, _getYearMonth.getYearMonth)(monthDate));\n    }\n  },\n  canMoveForward: function canMoveForward() {\n    if (this.getMonthDate().add(this.props.numberOfCalendars, 'months').isAfter(this.state.enabledRange.end)) {\n      return false;\n    }\n    return true;\n  },\n  moveForward: function moveForward() {\n    var monthDate = void 0;\n\n    if (this.canMoveForward()) {\n      monthDate = this.getMonthDate();\n      monthDate.add(1, 'months');\n      this.setState((0, _getYearMonth.getYearMonth)(monthDate));\n    }\n  },\n  changeYear: function changeYear(year) {\n    var _state = this.state,\n        enabledRange = _state.enabledRange,\n        month = _state.month;\n\n\n    if ((0, _momentRange2.default)({ years: year, months: month, date: 1 }).unix() < enabledRange.start.unix()) {\n      month = enabledRange.start.month();\n    }\n\n    if ((0, _momentRange2.default)({ years: year, months: month + 1, date: 1 }).unix() > enabledRange.end.unix()) {\n      month = enabledRange.end.month();\n    }\n\n    this.setState({\n      year: year,\n      month: month\n    });\n  },\n  changeMonth: function changeMonth(date) {\n    this.setState({\n      month: date\n    });\n  },\n  rangesOverlap: function rangesOverlap(rangeA, rangeB) {\n    if (rangeA.overlaps(rangeB) || rangeA.contains(rangeB.start) || rangeA.contains(rangeB.end)) {\n      return true;\n    }\n    return false;\n  },\n  renderCalendar: function renderCalendar(index) {\n    var _props2 = this.props,\n        bemBlock = _props2.bemBlock,\n        bemNamespace = _props2.bemNamespace,\n        firstOfWeek = _props2.firstOfWeek,\n        numberOfCalendars = _props2.numberOfCalendars,\n        selectionType = _props2.selectionType,\n        value = _props2.value;\n    var _state2 = this.state,\n        dateStates = _state2.dateStates,\n        enabledRange = _state2.enabledRange,\n        hideSelection = _state2.hideSelection,\n        highlightedDate = _state2.highlightedDate,\n        highlightedRange = _state2.highlightedRange;\n\n    var monthDate = this.getMonthDate();\n    var year = monthDate.year();\n    var month = monthDate.month();\n    var key = index + '-' + year + '-' + month;\n    var props = void 0;\n\n    monthDate.add(index, 'months');\n\n    var cal = new _calendar2.default.Calendar(firstOfWeek);\n    var monthDates = _immutable2.default.fromJS(cal.monthDates(monthDate.year(), monthDate.month()));\n    var monthStart = monthDates.first().first();\n    var monthEnd = monthDates.last().last();\n    var monthRange = _momentRange2.default.range(monthStart, monthEnd);\n\n    if (_momentRange2.default.isMoment(value) && !monthRange.contains(value)) {\n      value = null;\n    } else if ((0, _isMomentRange2.default)(value) && !this.rangesOverlap(monthRange, value)) {\n      value = null;\n    }\n\n    if (!_momentRange2.default.isMoment(highlightedDate) || !monthRange.contains(highlightedDate)) {\n      highlightedDate = null;\n    }\n\n    if (!(0, _isMomentRange2.default)(highlightedRange) || !this.rangesOverlap(monthRange, highlightedRange)) {\n      highlightedRange = null;\n    }\n\n    props = {\n      bemBlock: bemBlock,\n      bemNamespace: bemNamespace,\n      dateStates: dateStates,\n      enabledRange: enabledRange,\n      firstOfWeek: firstOfWeek,\n      hideSelection: hideSelection,\n      highlightedDate: highlightedDate,\n      highlightedRange: highlightedRange,\n      index: index,\n      key: key,\n      selectionType: selectionType,\n      value: value,\n      maxIndex: numberOfCalendars - 1,\n      firstOfMonth: monthDate,\n      onMonthChange: this.changeMonth,\n      onYearChange: this.changeYear,\n      onSelectDate: this.onSelectDate,\n      onHighlightDate: this.onHighlightDate,\n      onUnHighlightDate: this.onUnHighlightDate,\n      dateRangesForDate: this.dateRangesForDate,\n      dateComponent: _CalendarDate2.default,\n      locale: this.props.locale\n    };\n\n    return _react2.default.createElement(_CalendarMonth2.default, props);\n  },\n\n\n  render: function render() {\n    var _props3 = this.props,\n        PaginationArrowComponent = _props3.paginationArrowComponent,\n        className = _props3.className,\n        numberOfCalendars = _props3.numberOfCalendars,\n        stateDefinitions = _props3.stateDefinitions,\n        selectedLabel = _props3.selectedLabel,\n        showLegend = _props3.showLegend,\n        helpMessage = _props3.helpMessage;\n\n\n    var calendars = _immutable2.default.Range(0, numberOfCalendars).map(this.renderCalendar);\n    className = this.cx({ element: null }) + ' ' + className;\n\n    return _react2.default.createElement(\n      'div',\n      { className: className.trim() },\n      _react2.default.createElement(PaginationArrowComponent, { direction: 'previous', onTrigger: this.moveBack, disabled: !this.canMoveBack() }),\n      calendars.toJS(),\n      _react2.default.createElement(PaginationArrowComponent, { direction: 'next', onTrigger: this.moveForward, disabled: !this.canMoveForward() }),\n      helpMessage ? _react2.default.createElement(\n        'span',\n        { className: this.cx({ element: 'HelpMessage' }) },\n        helpMessage\n      ) : null,\n      showLegend ? _react2.default.createElement(_Legend2.default, { stateDefinitions: stateDefinitions, selectedLabel: selectedLabel }) : null\n    );\n  }\n});\n\nexports.default = DateRangePicker;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}